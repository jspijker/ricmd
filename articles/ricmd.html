<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ricmd">
<title>ricmd • ricmd</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ricmd">
<meta property="og:description" content="ricmd">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ricmd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/ricmd.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>ricmd</h1>
            
      
      
      <div class="d-none name"><code>ricmd.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The integrated Rule Oriented Data System (iRODS) is an open source
data management software. It is used by research organisations and
governmental institutes and has an important role in their ever growing
data services.</p>
<p>This package provides an R user interface with iRODS and implements
the basic functionality of working with iRODS collections and data
objects from R. Whith this package it is possible to create, modify, and
remove collections and data objects from an iRODS Zone. For data objects
it is also possible to add, remove and modify meta data in the so called
attribute-value-unit (AVU) tripples. For more information see the <a href="https://irods.org/documentation/" class="external-link">iRODS documentation</a></p>
<p>This package is based on the <a href="https://github.com/irods/python-irodsclient" class="external-link">python
irodsclient</a> and it uses <a href="https://cran.r-project.org/package=reticulate" class="external-link">reticulate</a> to
interact with this library.</p>
<p>All functions in this package start with the ri_ prefix, this
prevents hiding functions from other packages and makes your code more
readable.</p>
</div>
<div class="section level2">
<h2 id="prerequisites">prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<p>This package requires that the python-irodsclient library is
installed. It is developped and tested using python version &gt;3. Use
pip to install the library:</p>
<pre><code>pip3 install python-irodsclient</code></pre>
<p>This package uses the iRODS environment files in
<code>~/.irods/</code>, these files should contain the user credentials
needed to connect to iRODS. So it is up to the user to set up their
iRODS environment before he or she can use this package. If the user can
use the so called ‘i commands’, this package should also function
properly.</p>
</div>
<div class="section level2">
<h2 id="zones-collections-data-objects-and-meta-data">Zones, collections, data objects and meta data<a class="anchor" aria-label="anchor" href="#zones-collections-data-objects-and-meta-data"></a>
</h2>
<p>To understand how to use this package a basic understanding of iRODS
is needed. The short version to remember is: each iRODS system is a
‘zone’, in these zones data collections exists and each data collection
contains many data objects. Each data object contains meta data in so
called Attribute-Value-Unit (AVU) tripples. There is a longer version
but that’s beyond the scope of this vignette, please see the <a href="https://irods.org/documentation/" class="external-link">iRODS documentation</a>.</p>
<div class="section level3">
<h3 id="zones">Zones<a class="anchor" aria-label="anchor" href="#zones"></a>
</h3>
<p>A Zone is an independent iRODS system which contains the data catalog
and one or more iRODS servers. While an iRODS implementation can contain
multiple zones, in this vignette we assume a single zone
implementation.</p>
</div>
<div class="section level3">
<h3 id="collections">Collections<a class="anchor" aria-label="anchor" href="#collections"></a>
</h3>
<p>A Zone can contain on or more collections and each collection can
contain one more sub collections. Collections are a way to store data in
a hierarchical structure like directories or folders.</p>
<p>This package uses a default collection, which you must set manually.
If you manipulate (store/retrieve etc) your data objects, it is assumed
that they exists in your default collection, unless you provide a
specific collection in the function arguments.</p>
</div>
<div class="section level3">
<h3 id="data-objects">Data objects<a class="anchor" aria-label="anchor" href="#data-objects"></a>
</h3>
<p>A Collection can contain multiple data objects, like files in a
folder or directory. Although somewhat different, a data object can be
considered as a normal file.</p>
</div>
<div class="section level3">
<h3 id="meta-data">Meta data<a class="anchor" aria-label="anchor" href="#meta-data"></a>
</h3>
<p>Meta data is stored in AVU tripples. Many objects in iRODS, like
users, collections, or resources can contain meta data but this package
only considers meta data associated with data objects.</p>
<p>AVU triples must contain an attribute and value, unit is optional.
Within iRODS it is possible to search and query data objects based on
their values in the AVU triples. These search options are not yet
implemented in this package.</p>
</div>
</div>
<div class="section level2">
<h2 id="initialise-an-irods-session">Initialise an iRODS session<a class="anchor" aria-label="anchor" href="#initialise-an-irods-session"></a>
</h2>
<p>So, now that we know the basics let’s start with an iRODS session. We
assume that your iRODS environment is set up properly and that you have
the python iRODS client in place.</p>
<p>To start an iRODS session from within R you exexcute the following
commands:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ricmd</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: reticulate</span></span>
<span><span class="co">#&gt; loading ricmd python3 environment</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; python:         /usr/bin/python3</span></span>
<span><span class="co">#&gt; libpython:      /usr/lib/python3.7/config-3.7m-x86_64-linux-gnu/libpython3.7.so</span></span>
<span><span class="co">#&gt; pythonhome:     //usr://usr</span></span>
<span><span class="co">#&gt; version:        3.7.5 (default, Apr 19 2020, 20:18:17)  [GCC 9.2.1 20191008]</span></span>
<span><span class="co">#&gt; numpy:          /usr/lib/python3/dist-packages/numpy</span></span>
<span><span class="co">#&gt; numpy_version:  1.16.2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; NOTE: Python version was forced by use_python function</span></span>
<span><span class="fu"><a href="../reference/ri_session.html">ri_session</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in ri_session(): irods environment file not found</span></span></code></pre></div>
<p>Executing this command creates a hidden environment wich contains the
iRODS configuration and the session object. This session object refers
to the session class from the pyton library and contains all the methods
for working with iRODS.</p>
<p>After initiating the iRODS session one must set the default
collection:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_setCollection.html">ri_setCollection</a></span><span class="op">(</span><span class="st">"/tempZone/home/devel"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in ri_setCollection("/tempZone/home/devel"): ri_setcollection: session does not exists</span></span></code></pre></div>
<p>The name of the collection always start with the name of the zone, in
our case ‘/tempZone’ (mind the ‘/’ at the beginning). We use the
standard collection from a default iRODS installation with a username
‘devel’, hence ‘home/devel’.</p>
<p>This default collection can be changed anytime in your script. If you
want check which collection is the default collection, then use:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_getCollection.html">ri_getCollection</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-a-new-collection">Creating a new collection<a class="anchor" aria-label="anchor" href="#creating-a-new-collection"></a>
</h2>
<p>A new data collection can be created with</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_createCollection.html">ri_createCollection</a></span><span class="op">(</span><span class="st">"/tempZone/home/devel/tests"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in ri_collectionExists(collection): ri_collectionExists: session does not exists</span></span></code></pre></div>
<p>The only argument of ri_createCollection is the full path to the new
collection. If this collection allready exists, an error will
follow.</p>
<p>Since we created the new collection inside our default collection, we
can show it using the ri_listSubCollections command:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_listSubCollections.html">ri_listSubCollections</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span></code></pre></div>
<p>To remove a collection, the ri_removeCollection command can be
used:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_removeCollection.html">ri_removeCollection</a></span><span class="op">(</span><span class="st">"/tempZone/home/devel/tests"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-data-objects">Creating data objects<a class="anchor" aria-label="anchor" href="#creating-data-objects"></a>
</h2>
<div class="section level3">
<h3 id="data-objects-vs-local-files">Data objects vs local files<a class="anchor" aria-label="anchor" href="#data-objects-vs-local-files"></a>
</h3>
<p>Data objects in iRODS can be regarded as files (although, technically
not completely true). One can store a local file from disk as data
object into a data collection of iRODS. Also, a data object can be
retrieved from iRODS and stored as file on the local disk. Storing and
retrieving in iRODS are called put and get respectively.</p>
<p>By default the data object is stored in or retrieved from the default
collection set by <code>ri\_setCollection</code>. An equivalent approach
can be followed for files stored on disk. It is good practice to
seperate data from code.This means that data is always written to a
different location (directory) than your current working directory,
which contains the code. Using the <code>ri\_setDatadir</code> function
one can set the location where files are stored on the local file system
and the ricmd package uses that directory by default.</p>
<p>To demonstrate this, we first create a temporary data directory and
store a data file in that directory:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">testDatadir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">'data'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">testDatadir</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">x</span>,<span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">testDatadir</span>,<span class="st">"datafile.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We set this data directory as default location for local files</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_setDatadir.html">ri_setDatadir</a></span><span class="op">(</span><span class="va">testDatadir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="store-data-objects">Store data objects<a class="anchor" aria-label="anchor" href="#store-data-objects"></a>
</h3>
<p>For storing data objects into iRODS you can use the ri_put command.
In the next example we use the test collection created above as default
collection.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_setCollection.html">ri_setCollection</a></span><span class="op">(</span><span class="st">"/tempZone/home/devel/tests"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in ri_setCollection("/tempZone/home/devel/tests"): ri_setcollection: session does not exists</span></span>
<span><span class="fu"><a href="../reference/ri_put.html">ri_put</a></span><span class="op">(</span>filename<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">testDatadir</span>,<span class="st">"datafile.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span></code></pre></div>
<p>This stores the datafile.rds file as object in the default
collection. To see a list of stored objects the ri_listDataObjects
function is available</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_listDataObjects.html">ri_listDataObjects</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span></code></pre></div>
<p>Overwriting and existing object is not allowed, this results in an
error. Using the overwrite=TRUE argument, overwriting of objects can be
forced</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># results in an error</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="../reference/ri_put.html">ri_put</a></span><span class="op">(</span>filename<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">testDatadir</span>,<span class="st">"datafile.rds"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv) : </span></span>
<span><span class="co">#&gt;   object 'collection' not found</span></span>
<span></span>
<span><span class="co"># this works</span></span>
<span><span class="fu"><a href="../reference/ri_put.html">ri_put</a></span><span class="op">(</span>filename<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">testDatadir</span>,<span class="st">"datafile.rds"</span><span class="op">)</span>,overwrite<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span></code></pre></div>
<p>Now that the data is stored in iRODS you can remove the local file if
you want.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">testDatadir</span>,<span class="st">"datafile.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="retreive-data-objects">Retreive data objects<a class="anchor" aria-label="anchor" href="#retreive-data-objects"></a>
</h3>
<p>To get (retrieve) the data object created in the last section, you
use the <code><a href="../reference/ri_get.html">ri_get()</a></code> function. By default, this functions
stores the file locally in the data directory defined above.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_get.html">ri_get</a></span><span class="op">(</span><span class="st">"datafile.rds"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span></code></pre></div>
<p>And now you can read and process the data</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">testDatadir</span>,<span class="st">"datafile.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in gzfile(file, "rb"): cannot open compressed file '/tmp/Rtmpdl1UyP/</span></span>
<span><span class="co">#&gt; data/datafile.rds', probable reason 'No such file or directory'</span></span>
<span><span class="co">#&gt; Error in gzfile(file, "rb"): cannot open the connection</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>I you want to store the file in an other location, or using a
different filename, you can use the datadir and filename arguments of
this function</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_get.html">ri_get</a></span><span class="op">(</span><span class="st">"datafile.rds"</span>,datadir<span class="op">=</span><span class="st">"/path/to/other/directory"</span>,</span>
<span>    filename<span class="op">=</span><span class="st">"differentFileName.rds"</span><span class="op">)</span></span></code></pre></div>
<p>The ri_get does not overwrite existing files by default. If you want
to get the same data object more than once you either overwrite the
existing file or rename it</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the file allready exists, so this results in an error</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="../reference/ri_get.html">ri_get</a></span><span class="op">(</span><span class="st">"datafile.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv) : </span></span>
<span><span class="co">#&gt;   object 'collection' not found</span></span>
<span></span>
<span><span class="co"># overwrite te file</span></span>
<span><span class="fu"><a href="../reference/ri_get.html">ri_get</a></span><span class="op">(</span><span class="st">"datafile.rds"</span>,overwrite<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span>
<span></span>
<span><span class="co"># or use different file anme</span></span>
<span><span class="fu"><a href="../reference/ri_get.html">ri_get</a></span><span class="op">(</span><span class="st">"datafile.rds"</span>,filename<span class="op">=</span><span class="st">"datafile2.rds"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="manage-meta-data">Manage meta data<a class="anchor" aria-label="anchor" href="#manage-meta-data"></a>
</h2>
<p>In iRODS meta data, an AVU tripple, can be associated with users,
collections and data objects. This package only supports meta data of
data objects. Meta data of collections, users etc. is not supported.</p>
<p>An AVU triple must be an unique combination of attribute, value, and
unit. If two tripples have the same attribute, the value must differ,
or, if the tripples have the same attribute and value, then the unit
must differ.</p>
<p>To add meta data to an object, you use the ri_metaAdd function. If we
want to add meta data to the <code>datafile.rds</code> data object
created above, we execute:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_metaAdd.html">ri_metaAdd</a></span><span class="op">(</span>object<span class="op">=</span><span class="st">"datafile.rds"</span>,attribute<span class="op">=</span><span class="st">"attr1"</span>,value<span class="op">=</span><span class="st">"val1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span></code></pre></div>
<p>In above command we assume that <code>datafile.rds</code> is in the
default collection. For an AVU triple, you must provide an attribute and
value. The unit is optional and defaults to NULL.</p>
<p>If you want to add meta data to an object in a different collection,
you must provide the collection argument:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ri_metaAdd.html">ri_metaAdd</a></span><span class="op">(</span>object<span class="op">=</span><span class="st">"otherObject"</span>,attribute<span class="op">=</span><span class="st">"attr1"</span>,value<span class="op">=</span><span class="st">"val4"</span>,</span>
<span>           collection<span class="op">=</span><span class="st">"/zone/otherCollection"</span><span class="op">)</span></span></code></pre></div>
<p>With the ri_metaGet you can get all the meta data from an object as a
data.frame with attribute, value, and units fields. The data.frame
contains a row for each attribute existing in the meta data. The
data.frame gives NA values for units which are NULL.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first add some more meta data</span></span>
<span><span class="fu"><a href="../reference/ri_metaAdd.html">ri_metaAdd</a></span><span class="op">(</span>object<span class="op">=</span><span class="st">"datafile.rds"</span>,attribute<span class="op">=</span><span class="st">"attr2"</span>,value<span class="op">=</span><span class="st">"val2"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span>
<span><span class="fu"><a href="../reference/ri_metaAdd.html">ri_metaAdd</a></span><span class="op">(</span>object<span class="op">=</span><span class="st">"datafile.rds"</span>,attribute<span class="op">=</span><span class="st">"attr3"</span>,value<span class="op">=</span><span class="st">"val3"</span>,units<span class="op">=</span><span class="st">"unit1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span>
<span></span>
<span><span class="co"># get meta data</span></span>
<span><span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ri_metaGet.html">ri_metaGet</a></span><span class="op">(</span><span class="st">"datafile.rds"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">meta</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in print(meta): object 'meta' not found</span></span></code></pre></div>
<p>You can also delete meta triples from an object.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/ri_metaRemove.html">ri_metaRemove</a></span><span class="op">(</span><span class="st">"datafile.rds"</span>,attribute<span class="op">=</span><span class="st">"attr3"</span>,value<span class="op">=</span><span class="st">"val3"</span>,units<span class="op">=</span><span class="st">"unit1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span>
<span><span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ri_metaGet.html">ri_metaGet</a></span><span class="op">(</span><span class="st">"datafile.rds"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get("collection", env = .ricmdEnv): object 'collection' not found</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">meta</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in print(meta): object 'meta' not found</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error in py_module_import(module, convert = convert): ModuleNotFoundError: No module named 'irods'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Detailed traceback: </span></span>
<span><span class="co">#&gt;   File "/home/spijker/R/x86_64-pc-linux-gnu-library/3.6/reticulate/python/rpytools/loader.py", line 24, in _import_hook</span></span>
<span><span class="co">#&gt;     level=level</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): object 'irods' not found</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): object 'session' not found</span></span>
<span><span class="co">#&gt; Warning in rm(session): object 'session' not found</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Job Spijker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
